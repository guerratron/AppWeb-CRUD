<!doctype html>
<html>

    <head>
        <meta charset="utf-8">
        <meta language="es-ES">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
        <!-- Etiqueta de compatibilidad, fuerza a IE a utilizar el último motor de renderizado 
         Se puede borrar si se utiliza mejor el ''.htaccess' -->
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="author" content="Juanjo Guerra - dinertron@gmail.com - guerraTron-18">
        <title>Formulario de Suscripción</title>
        <link rel="icon" href="favicon.ico" type="image/x-icon">
        <link href="estilos.css" rel="stylesheet" type="text/css">
        <script src="validation.js"></script>
    </head>

    <body>
        <header>
            <div id="breadcrumbs">
                <hr style="font-size:xx-small; line-height: 0.2em;" />
                <i>BREADCRUMBS</i>: &emsp; | &emsp; &#x1F3E0; <a href="index.html">Home</a> &emsp; | <span>Subscribe</span>
                <hr style="font-size:xx-small; line-height: 0.2em;" />
            </div>
        </header>

        <main>
            <div class="group">
                <h4>Formulario de Suscripción</h4>
                <form action="registro.php" method="POST">
                    <label style="font-size:smaller; color: gray;">Caracteres permitidos: letras incluyendo ñ, acentos o guiones</label>
                    <!-- PRIMERA VALIDADCIÓN A TRAVÉS DE HTML5, el atributo 'required' -->
                    <label for="nombre">Nombre <span><em>(requerido)</em></span></label>
                    <input type="text" id="nombre" name="nombre" class="form-input" placeholder="Nombre de usuario" required />

                    <label for="apellido">Apellido <span><em>(requerido)</em></span></label>
                    <input type="text" id="apellido" name="apellido" placeholder="1º Apellido" class="form-input" required />

                    <label for="email">Email <span><em>(requerido)</em></span></label>
                    <input type="email" id="email" name="email" class="form-input" placeholder="email válido" required />
                    <label for="unsuscribe">&#x274c; <span>Desuscribirse</span></label>
                    <input type="checkbox" id="unsuscribe" name="unsuscribe" class="form-input" title="marcar y enviar para desuscribirse" />
                <blockquote> <input class="form-btn" name="submit" type="submit" value="&#x26A1;-Enviar" /></blockquote>
                </form>
                <blockquote>&#x1F3E0; <a href="index.html">Home</a></blockquote>
            </div>
            <div id="msg" class="group">
                <div style="color: green; background: navajoWhite;">
                    Rellenar el formulario
                </div>
            </div>
        </main>

        <footer>
            <blockquote>
                <hr />
                <sup>04-11-25 - </sup>
                <span>pequeña muestra para el <b>IECA</b></span>
                <sub><small>by Juanjo Guerra</small></sub>
            </blockquote>
        </footer>
    </body>

    <script>
        document.addEventListener("DOMContentLoaded", (ev1)=>{
            let msg = document.querySelector("#msg");
            let submit = document.querySelector("input[type='submit']");
            submit.addEventListener("click", (ev2)=>{
                msg.setAttribute("style", "color: green; background: navajoWhite;");
                msg.innerHTML = `Rellenar el formulario`;
                // SEGUNDA VALIDACIÓN POR JAVASCRIPT ANTES DEL ENVÍO
                // utiliza el objeto VAL del archivo "validation.js"
                if(!window["VAL"].isOK(nombre.value, apellido.value, email.value)){
                    ev2.stopPropagation();
                    ev2.preventDefault();
                    msg.innerHTML = `<div style="color: red; background: whiteSmoke;">
                        <p>¡Revisar los campos, Datos NO VÁLIDOS !</p>
                        <p>Nombre: "${nombre.value}", Apellido: "${apellido.value}" e Email: "${email.value}"</p>
                    </div>`;
                }
            });
            let nombre = document.querySelector("input[name='nombre']");
            let apellido = document.querySelector("input[name='apellido']");
            let email = document.querySelector("input[name='email']");
            //let desuscribir = document.querySelector("input[name='unsuscribe']");
        });

        
    </script>

</html>